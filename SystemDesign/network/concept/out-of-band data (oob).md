传输层协议使用带外数据（out-of-band，OOB）来发送一些重要的数据，如果通信一方有重要的数据需要通知对方时，协议能够将这些数据快速地发送到对方。为了发送这些数据，协议一般不使用与普通数据相同的通道，而是使用另外的通道。linux系统的[套接字](https://baike.baidu.com/item/%E5%A5%97%E6%8E%A5%E5%AD%97)机制支持低层协议发送和接受带外数据。但是[TCP协议](https://baike.baidu.com/item/TCP%E5%8D%8F%E8%AE%AE/8988699)没有真正意义上的带外数据。为了发送重要协议，TCP提供了一种称为紧急模式（urgent mode）的机制。TCP协议在[数据段](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E6%AE%B5)中设置URG位，表示进入紧急模式。接收方可以对紧急模式采取特殊的处理。很容易看出来，这种方式数据不容易被阻塞，并且可以通过在我们的服务器端程序里面捕捉SIGURG信号来及时接受[数据](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE/5947370)。这正是我们所要求的效果。

由于[TCP协议](https://baike.baidu.com/item/TCP%E5%8D%8F%E8%AE%AE)每次只能发送和接受带外数据一个[字节](https://baike.baidu.com/item/%E5%AD%97%E8%8A%82)，所以，我们可以通过设置一个[数组](https://baike.baidu.com/item/%E6%95%B0%E7%BB%84)，利用发送数组下标的办法让服务器程序能够知道自己要监听的端口以及要连接的服务器IP/port。由于限定在1个字节，所以我们最多只能控制255个port的连接，255个内网机器（不过同一子网的机器不会超过255J），同样也只能控制255个监听端口，不过这些已经足够了。