#program-test 


>[!tldr]
>A _metamorphic testing (MT)_ method has been proposed with a view to making use of the valuable information in _successful test cases_. It does not depend on the availability of an _oracle_. It proposes to generate followup test cases based on _metamorphic relations_, or properties among inputs and outputs of the target function.

Observations:
1. (_Are successful test cases really useless?_) Successful test cases do carry useful information about the program but how to exploit them? (e.g. **fault-based testing**)
2. (_The oracle problem_) The oracle problem refers to situations where it is extremely difficult, or impossible, to verify the test result of a given test case (that is, an input selected to test the program).
3. (_The reliable test set problem_) The reliable test set problem means that since it is normally not possible to exhaustively execute all possible test cases, it is challenging to effectively select a subset of test cases (the reliable test set) with the ability to determine the correctness of the program. It is related to _test case generation strategies_

>[!def] oracle
> An _oracle_ is a mechanism against which people can decide whether the outcome of the program under test on the test case is correct.


# Metamorphic testing

>[!def] metamorphic relation
> A _metamorphic relation (MR)_ is an expected relation among the inputs and outputs of **multiple** executions of the target program.

>[!def] follow-up test case
> MR is defined on multiple inputs/outputs of a program under test.
> 
> Given a test case generator strategy $S$, and the finite test case set $T = \{t_i\}_{i=0}^n$ (generated by $S$ in order) where the MR is defined on, we say $T' = \{t_i \in T: i > 0\}$ is the set of _follow-up test cases_ of the first test case $t_0\in T$

>[!example] MR
> The following equality defines a MR where the test cases are $t_0 = x$ and $t_1 = \pi-x$.
> $$ \sin(x) = \sin(\pi - x)$$
> in which $\pi - x$ is a follow-up test case of test case $x$. 

>[!note]
> 1. before MT is applied, a test case selection strategy $S$ and a set of test cases $T$ corresponding to $S$ must exist in the first place. If no failure is revealed by $T$ , then MT can be applied to generate a new set of test cases as a partner accompanying $T$, so that the program can be further verified against some necessary metamorphic relations.
> 2. MRs are not limited to identity relations.

# Integrating fault-based testing

>[!tip] idea
>although testing could not prove the correctness of programs, correctly executed test cases can indeed show that the program code is _free from certain types of fault_.

The idea is to prove some kind of fault do not exists, we first prove that some MR will not hold if the fault exists.


# Take aways of defining MR

1. Theoretically stronger metamorphic relations may not necessarily have a higher failure-revealing ability than weaker ones. 
2. Bigger differences between a test case and its follow-up test case usually means more effective in failure-revealing.

# References

1. Chen, T. Y., Kuo, F.-C., Tse, T., & Zhou, Z. Q. (2003). Metamorphic testing and beyond. _Eleventh Annual International Workshop on Software Technology and Engineering Practice_, 94–100.
2. Chen, T. Y., Kuo, F.-C., Liu, H., Poon, P.-L., Towey, D., Tse, T. H., & Zhou, Z. Q. (2018). Metamorphic Testing: A Review of Challenges and Opportunities. _ACM Computing Surveys_, _51_(1), 4:1-4:27. [https://doi.org/10.1145/3143561](https://doi.org/10.1145/3143561)
3. Hughes, J. (2019). How to Specify It! A Guide to Writing Properties of Pure Functions. _Trends in Functional Programming: 20th International Symposium, TFP 2019, Vancouver, BC, Canada, June 12–14, 2019, Revised Selected Papers_, 58–83. [https://doi.org/10.1007/978-3-030-47147-7_4](https://doi.org/10.1007/978-3-030-47147-7_4)