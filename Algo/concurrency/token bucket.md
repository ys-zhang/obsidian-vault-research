#algorithm  #concurrency  #flow-control


令牌桶其实和漏桶的原理类似，只不过漏桶是**定速地流出**，而令牌桶是**定速地往桶里塞入令牌**，然后请求只有拿到了令牌才能通过，之后再被服务器处理。

-   定速的往桶内放入令牌
-   令牌数量超过桶的限制，丢弃
-   请求来了先向桶内索要令牌，索要成功则通过被处理，反之拒绝


![[Pasted image 20210909173158.png]]


> 看到这又想到啥？**Semaphore 信号量啊**，信号量可控制某个资源被同时访问的个数，其实和咱们拿令牌思想一样，一个是拿信号量，一个是拿令牌。只不过信号量用完了返还，而咱们令牌用了不归还，因为令牌会定时再填充。